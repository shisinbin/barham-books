@layer component {
  .wizard {
    --c-panel-bg: hsl(var(--hue-primary), 20%, 97%);
    --c-panel-border: hsl(0, 0%, 88%);

    --c-field-bg: hsl(0, 0%, 99%);
    --c-field-border: hsl(var(--hue-primary), 14%, 80%);

    --shadow-panel: 0 8px 24px rgba(0, 0, 0, 0.06);
    /* --shadow-panel:
      0 4px 6px -1px hsla(232, 58%, 15%, 0.1),
      0 2px 4px -1px hsla(232, 58%, 15%, 0.06); */

    .wizard__nav {
      margin-block-end: 32px;
    }

    .wizard__nav-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      padding: 0;
      list-style: none;
      max-width: 390px;
      margin-inline: auto;
    }

    .wizard__nav-item {
      --line-height: 2px;
      --line-offset: 0.4em;

      flex: 1;
      padding-block-end: 2px;
      text-align: center;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: -0.05em;
      font-size: calc(14 / 16 * 1rem);
      border-color: var(--c-gray-light);
      color: var(--c-gray-light);
      position: relative;
      isolation: isolate;

      &::after {
        content: '';
        position: absolute;
        bottom: -4px;
        inset-inline: 0.125em;
        height: var(--line-height);
        background: var(--c-gray-light);
      }

      &.active {
        --line-height: 4px;
        color: var(--c-purple);

        &::after {
          background: var(--c-purple);
          bottom: -6px;
        }
      }

      &.completed {
        color: var(--c-gray-medium);
        /* border-color: var(--c-gray-medium); */

        &::after {
          background: var(--c-gray-medium);
        }
      }
    }

    .wizard__panel {
      width: min(640px, 100%);
      margin-inline: auto;
      padding: 32px;
      background: var(--c-panel-bg);
      border-radius: 8px;
      box-shadow: var(--shadow-panel);
      border: 2px solid var(--c-panel-border);

      &.full {
        width: 100%;
      }
    }

    .wizard__header {
      margin-block-end: 32px;
    }

    .wizard__title {
      font-size: calc(32 / 16 * 1rem);
      margin-block-end: 12px;
    }

    .wizard__intro {
      color: var(--c-gray-medium);
    }

    .wizard__divider {
      --flourish-length: 70px;
      --inner-c: hsl(var(--hue-primary), 14%, 65%);
      --outer-c: hsl(var(--hue-primary), 14%, 85%);

      display: inline-block;
      position: relative;
      font-size: calc(14 / 16 * 1rem);
      font-style: italic;
      margin: 8px auto;
      color: var(--inner-c);

      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        width: var(--flourish-length);
        margin: auto;
        height: 3px;
        transform: translateY(1px);
      }

      &::before {
        left: calc((var(--flourish-length) + 10px) * -1);
        clip-path: polygon(100% 0, 0 50%, 100% 100%);
        background: linear-gradient(
          to left,
          var(--inner-c) -20%,
          var(--outer-c)
        );
      }

      &::after {
        right: calc((var(--flourish-length) + 10px) * -1);
        clip-path: polygon(0 0, 0 100%, 100% 50%);
        background: linear-gradient(
          to right,
          var(--inner-c) -20%,
          var(--outer-c)
        );
      }
    }

    .form {
      width: 100%;
      display: grid;
      gap: 24px;
    }

    .form input,
    .form select,
    .form textarea {
      padding: 10px 12px;
      border-radius: 6px;
      border: 1px solid var(--c-field-border);
      font-size: calc(16 / 16 * 1rem);
      background: var(--c-field-bg);
    }

    .form label {
      width: fit-content;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 32px;
      align-items: start;

      @media (width >= calc(1000 / 16 * 1rem)) {
        grid-template-columns: 1fr 1fr;
      }

      &.three-equal {
        @media (width >= calc(1000 / 16 * 1rem)) {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      &.two-thirds {
        @media (width >= calc(1000 / 16 * 1rem)) {
          grid-template-columns: 2fr 1fr;
        }
      }
    }

    .form-field {
      display: grid;
      gap: 8px;
      width: 100%;

      &.adjacent {
        display: flex;
        align-items: center;
        gap: 16px;
      }
    }

    .form-actions {
      margin-block: 32px;
      display: flex;
      justify-content: space-between;
    }

    .select-form {
    }

    .book-results {
      --grid-gap: 24px;
      border: none;
      padding: 0;
      display: grid;
      gap: var(--grid-gap);
      margin-block-end: var(--grid-gap);
    }

    .book-card {
      position: relative;
      width: 100%;
      display: block;
      border: 2px solid var(--c-gray-light);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: 150ms ease-in-out;
      transition-property: border-color, background;
    }

    /* .book-card:hover {
      border-color: hsl(var(--hue-primary), 14%, 65%);
    } */

    .book-card:has(input:checked),
    .book-card:hover {
      border-color: var(--c-purple);
      background: hsl(var(--hue-primary), 58%, 55%, 0.05);
    }

    .book-card:has(input:focus-visible) {
      outline: none;
    }

    .book-card input[type='radio'] {
      position: absolute;
      opacity: 0.5;
      width: 0;
      height: 0;
      /* pointer-events: none; */
    }

    .book-card input[type='radio']:focus,
    .book-card:focus {
      outline: none;
    }

    .badge {
      position: absolute;
      top: 12px;
      right: -10px;
      background: red;
      height: 32px;
      line-height: 32px;
      padding: 0 10px;
      font-size: calc(14 / 16 * 1rem);
      color: var(--color-text-light);
      border-radius: 4px;
      background: hsl(var(--hue-primary), 58%, 55%);
    }

    .book-card__header {
      display: grid;
      gap: 8px;
      margin-block-end: 12px;
    }

    .book-card__title {
      font-weight: 600;
    }

    .book-card__thumb {
      width: calc(120 / 16 * 1rem);
      float: left;
      border-radius: 4px;
      margin-inline-end: 12px;
      margin-block: 8px;
    }

    .book-card__meta {
      color: var(--c-gray-medium);
    }

    .book-card__summary {
      text-wrap: wrap;
    }

    .book-card-manual {
      padding-block: 32px;
    }

    .select-form__actions {
      margin-block-start: 48px;
    }

    #clear-photo {
      display: inline-block;
      padding: 4px 8px;
      border: 1px solid var(--color-text-dark);
      margin-block-start: 4px;
      margin-inline-start: auto;
      width: fit-content;
      border-radius: 4px;
      cursor: pointer;
      font-size: calc(14 / 16 * 1rem);

      &:hover {
        background-color: var(--c-gray-light);
      }
    }

    .tag-hint {
      display: inline-block;
      margin-inline-start: auto;
      /* font-style: italic; */
      font-size: calc(14 / 16 * 1rem);
      /* font-weight: 300;
      line-height: 1;
      letter-spacing: 0.02em; */
    }

    .wizard__alert {
      padding: 16px 18px;
      border-radius: 6px;
      margin-block-end: 20px;
      background: var(--c-gray-lighter);
      border-inline-start: 4px solid;

      &.danger {
        border-color: hsl(0, 94%, 27%);
        background: rgba(220, 38, 38, 0.08);

        & .wizard__alert-title {
          color: hsl(0, 94%, 27%);
        }
      }

      &.info {
        border-color: hsl(240, 93%, 22%);
        background: rgba(37, 99, 235, 0.08);

        & .wizard__alert-title {
          color: hsl(240, 93%, 22%);
        }
      }
    }

    .wizard__alert-title {
      margin-block-end: 6px;
      font-size: calc(20 / 16 * 1rem);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .wizard__alert-link {
      text-decoration: underline;
      text-underline-offset: 2px;

      &:hover {
        text-decoration: none;
        color: var(--c-magenta);
      }
    }

    .wizard__details-list {
      padding-block: 16px;

      &.mask {
        opacity: 0.55;
        filter: saturate(0.85);
        pointer-events: none;
      }
    }
    .wizard__details-list dt {
      color: var(--c-gray-medium);
      margin-block-end: 4px;

      &::after {
        content: ':';
      }
    }

    .wizard__details-list dd {
      margin-block-end: 12px;
      margin-inline-start: 16px;
      font-size: calc(20 / 18 * 1rem);
    }

    .wizard__confirm-actions {
      margin-block-start: 16px;
      display: flex;
      justify-content: space-between;

      & button[disabled] {
        cursor: not-allowed;
      }
    }

    .wizard__button {
      margin-block: 32px;
    }

    .select2-container--default .select2-selection--single {
      padding: 8px !important;
      border-radius: 6px !important;
      border-color: hsl(210, 14%, 83%) !important;
      background: var(--c-field-bg) !important;
    }

    .select2-container .select2-selection--single {
      height: auto !important;
      background: var(--c-field-bg) !important;
    }

    .select2-container--default
      .select2-selection--single
      .select2-selection__arrow {
      top: 0 !important;
      bottom: 0 !important;
      margin-block: auto !important;
      background: var(--c-field-bg) !important;
    }

    .select2-container--default .select2-selection--multiple {
      padding: 8px !important;
      border-radius: 6px !important;
      border-color: hsl(210, 14%, 83%) !important;
      background: var(--c-field-bg) !important;
    }

    .select2-container
      .select2-search--inline
      .select2-search__field {
      margin-top: 0 !important;
      margin-left: 0 !important;
      background: var(--c-field-bg) !important;
    }
  }
}

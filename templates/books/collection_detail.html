{% extends 'site_base.html' %}
{% load static %}
{% load thumbnail %}

{% block title %}
  {{ collection.title }} - Barham Community Library
{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/pages/collection_detail.css' %}" />
  <link rel="stylesheet" href="{% static 'css/components/book-grid.css' %}" />
  <link rel="stylesheet" href="{% static 'css/components/pagination.css' %}" />
{% endblock %}

{% block content %}
  <div class="collection wrapper">
    <nav class="collection__nav">
      <a href="{% url 'collections' %}" class="collection__back">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" aria-hidden="true"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>  
        All collections
      </a>
    </nav>

    <header class="collection__header">
      <h1 class="collection__title">{{ collection.title }}</h1>
      <p class="collection__description medium">{{ collection.description }}</p>

      <ul class="collection__tags">
        {% for tag in collection.tags %}
          <li class="collection__tag">{{ tag }}</li>
        {% endfor %}
      </ul>
    </header>

    <div class="collection__meta">
      <p class="collection__count">
        {{ total_books }} books in this collection
      </p>

      <form method="get" class="collection__sort">
        <label class="collection__select-label" for="sort">Sort by</label>

        <div class="collection__select">
          <select name="sort" id="sort" onchange="this.form.submit()" class="collection__select-native">
            <option value="relevance" {% if sort == 'relevance' %}selected{% endif %}>
              Relevance
            </option>
            <option value="newest" {% if sort == 'newest' %}selected{% endif %}>
              Recently added
            </option>
            <option value="title" {% if sort == 'title' %}selected{% endif %}>
              Title A-Z
            </option>
          </select>
          
          <div class="collection__select-presentational">
            <span class="collection__select-value">
              {% if sort == 'newest' %}Recently added
              {% elif sort == 'title' %}Title A-Z
              {% else %}Relevance{% endif %}
            </span>

            <svg class="collection__select-icon" width="20" height="20" viewBox="0 0 24 24">
              <polyline points="6 9 12 15 18 9"
                fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
      </form>
    </div>

    {% include 'components/book_grid.html' with books=books %}

    {% include 'components/pagination.html' with books=books sort=sort %}

  </div>
{% endblock %}

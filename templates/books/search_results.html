{% extends 'site_base.html' %}
{% load static %}
{% load thumbnail %}

{% block title %}
  Search results for "{{ query }}" - Barham Books
{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/pages/search-results.css' %}" />
  <link rel="stylesheet" href="{% static 'css/components/search-bar.css' %}" />
  <link rel="stylesheet" href="{% static 'css/components/book-stack.css' %}" />
  <link rel="stylesheet" href="{% static 'css/components/pagination.css' %}" />
{% endblock %}

{% block extra_js %}
  <script src="{% static 'js/autocomplete_redux.js' %}" defer></script>
{% endblock %}

{% block content %}
  <label for="search-input" class="visually-hidden">Search for books using title or author name</label>
  {% include 'components/search_bar.html' %}

  <div class="search-results">
    <div class="wrapper search-results__wrapper">
      {% if total_books > 0 %}
        <h1 class="search-results__title" id="search-results-title">Search results for "{{ query }}"</h1>

        <div class="search-results__meta">
          <p class="search-results__count">{{ total_books }} result{{ total_books|pluralize }} found</p>
        </div>

        {% include 'components/book_stack.html' with books=books list_name_id='search-results-title' %}
        {% include 'components/pagination.html' with books=books query=query base_querystring=base_querystring %}
      {% else %}
        <h1 class="search-results__title">No results for "{{ query }}"</h1>
        <div class="search-results__error-body">
          {% comment %} <p>No books matched your search of: "{{ query }}".</p> {% endcomment %}
          <p>
            Try using fewer words or searching by <strong>title</strong> or <strong>author</strong> only.
          </p>
          {% comment %} <span class="search-results__tip">Tip: common words like "the" are ignored.</span> {% endcomment %}
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}

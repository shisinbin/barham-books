{% extends "base.html" %}

{% block title %}
  {% if tag %}
    {{ tag.name|title }}
  {% elif letter %}
    {{ letter|title }}
  {% else %}
    A to Z
  {% endif %}
  | Books |
{% endblock title %}

{% block content %}
  <section id="showcase-inner" class="py-5 text-white">
    <div class="container">
      <div class="row text-center">
        <div class="col-md-12">
          <h1 class="display-4">
            {% if tag %}
              {{ tag.name|title }}
            {% else %}
              Books A-Z
            {% endif %}
          </h1>
        </div>
      </div>
    </div>
  </section>

  <!-- Breadcrumb -->
  <section id="bc" class="mt-3">
    <div class="container">
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="{% url 'index' %}">Home</a>
          </li>
          <li class="breadcrumb-item">
            <a href="{% url 'books' %}">Books</a>
          </li>
          <li class="breadcrumb-item active">
            {% if tag %}
              {{ tag.name|title }}
            {% else %}
              A-Z
            {% endif %}
          </li>
        </ol>
      </nav>
    </div>
  </section>

  <!-- Alerts -->
  <!-- {% include 'partials/_alerts.html' %} -->

  {% if not tag %}
    <!-- <section id="listing" class="py-4">
      <div class="container">
        <div class="col-md-12">
          <div class="row">
            {% for character in alphabet %}
              <h4>
                <a href="{% url 'books_by_alphabet' letter_choice=character %}" class="badge badge-light">
                  {{ character|title }}
                </a>
              </h4>
            {% endfor %}
          </div>
        </div>
      </div>
    </section> -->
    <section id="bc" class="mt-3">
      <div class="container">
        <nav>
          <ol class="breadcrumb">
            <li
              {% if 'books/all/0/' in request.path %}
                class="breadcrumb-item active"
              {% else %}
                class="breadcrumb-item"
              {% endif %}>
              <a href="{% url 'books_by_alphabet' letter_choice='0' %}">0-9</a>
            </li>
            {% for character in alphabet %}
              <li 
                {% if 'books/all/{{ character }}/' in request.path %}
                  class="breadcrumb-item active"
                {% else %}
                  class="breadcrumb-item"
                {% endif %}>
                <a href="{% url 'books_by_alphabet' letter_choice=character %}">
                  {{ character|title }}
                </a>
              </li>
            {% endfor %}
          </ol>
        </nav>
      </div>
    </section>
  {% endif %}

  <section id="dashboard" class="py-4">
    <div class="container">
      {% if books %}
        <div class="row">
          <div class="col-md-12">
            {% if letter %}
              <h2>{{ letter|title }}</h2>
            {% endif %}
            {% if tag %}
              {% with books|length as total_books %}
                <p class="date">
                  {{ total_books }} result{{ total_books|pluralize }} found
                </p>
              {% endwith %}
            {% endif %}
            <ul class="list-group list-group-flush">
              {% for book in books %}
                <li class="list-group-item">
                  <a href="{{ book.get_absolute_url }}">{{ book.title }}</a>
                </li>
              {% endfor %}
            </ul>
          </div>
        </div>
        <br/>
        <div class="row">
          <div class="col-md-12">
            {% if books.has_other_pages %}
              <ul class="pagination">
                {% if books.has_previous %}
                  <li class="page-item">
                    <a href="?page={{books.previous_page_number}}" class="page-link">&laquo;</a>
                  </li>
                {% else %}
                  <li class="page-item disabled">
                    <a class="page-link">&laquo;</a>
                  </li>
                {% endif %}
                {% for i in books.paginator.page_range %}
                  {% if books.number == i %}
                    <li class="page-item active">
                      <a class="page-link">{{i}}</a>
                    </li>
                  {% else %}
                    <li class="page-item">
                      <a href="?page={{i}}" class="page-link">{{i}}</a>
                    </li>
                  {% endif %}
                {% endfor %}
                {% if books.has_next %}
                  <li class="page-item">
                    <a href="?page={{books.next_page_number}}" class="page-link">&raquo;</a>
                  </li>
                {% else %}
                  <li class="page-item disabled">
                    <a class="page-link">&raquo;</a>
                  </li>
                {% endif %}
              </ul>
            {% endif %}
          </div>        
        </div>
      {% else %}
        <p>No books.</p>
      {% endif %}
    </div>
  </section>

{% endblock content %}